# Индивидуальная работа по предмету SGBD Morozan Nichita IA2303
## Тема : Веб-приложение по хранению и обработке рецептов
## Инструкции по запуску проекта

Запуск проходит через терминал из папки с файлом index.php командой:  

` php -S localhost:8000 -t public`

## Описание лабораторной работы
Реализовать веб-приложение с хранением рецептов в бд Mysql и хранением комментариев в MongoDB.  
PHP часть использует PDO для подключения к mysql с использованием prepared statement для обеспечения защиты от sql-инъекций.  
MongoCommentariesRecipesApplication - JAVA SPRING API для работы с MongoDB. Использует уже существющий репозиторий MongoRepository для обращения к бд.
Валидация рецептов осуществена на сторое PHP, валидация комментариев осущественна на стороне html-формы и на стороне валидации в mongodb.
## Краткая документация к проекту
PHP приложение с подключением к Mysql :  
`/public/index.php`- главня страница с маршрутизацией;  
`/src/db.php`- функции бд(Все запросы осуществляются тут)  
`/src/helpers.php`- вспомогательные функции для формы.  
`/src/config/db.php`- конфиг бд(данные для подключения.  
`/src/handlers/index.php`- вспомогательный код для работы основной страницы.  
`/src/handlers/formHandler.php`- функции Обработки формы добавления и изменения.  
`/src/handlers/recipe/create.php`- вспомогательный код для страницы создания формы.  
`/src/handlers/recipe/delete.php`- вспомогельный код для страницы удаления.
`/src/handlers/recipe/edit.php`- вспомогательный код для страницы изменения рецепта.
`/src/handlers/recipe/index.php`- вспомогательный код для основной странцы со всеми рецептами.  
`/templates/layout.php`- Основной layot, на его основе строятся все осальные странцы. Содержит футер, хедер и блок для контента.  
`/templates/index.php`- страница для отображения списка всех рецептов.  
`/templates/error/php`- Страница для отображения ошибки.  
`/templates/recipe/create.php`- форма для создания нового рецепта.  
`/templates/recipe/delete.php`- страница с удалением рецепта.  
`/templates/recipe/edit.php`- страница с формой для изменения(в поля автоматически подставляются значения текущего рецепта).  
`/templates/recipe/index.php`- страница для отображения 1 рецепта с возможностью переключитьяс на изменения и удаление.  
Spring Api с подключением к mongodb:
`/controller/CommentController.java` - контроллер для обработки запросов на API.  
`/entity/Comment.java` -  Entity структура используемой коллекции.  
`/repository/CommentRepository.java` - репозиторий, расширяет MongoRepository для удобной работы с MongoDB.  
## Основные маршруты  
`/` или `./home` - главная страница со списком всех рецептов разбитых на странцы по 3 рецепта на каждой.  
`/recipe/create` - страница с добавлением нового рецепта  
`/recipe/:id` - страница определенного рецепта  
`/recipe/:id/edit` - страница с формой изменения рецепта  
`/recipe/:id/delete` - страница с удалением изменения рецепта  
`/error` - страница с ошибкой(при неправльном адрессе или несуществубщем рецепте)
## Примеры использования проекта 

